<!-- 
FP1.0(M) Användare skall kunna se sina gillade recept
FP1.1(C) På inläggen ska användaren kunna se antalet gillningar
FP4.0(M) Användare ska kunna ta bort sina inlägg
-->
<!--Kommentar för kodgranskning-->

<!DOCTYPE html>
<html lang="sv">

  <head>
    <meta charset="utf-8"/>
    <title>Min profil</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100&display=swap" rel="stylesheet"/> 

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
    rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
    crossorigin="anonymous"/>     
    <link href="static/style.css" rel="stylesheet" type="text/css"/>
  </head>

  <body>
    <div id="wrapper">
      <header>
        <a href="/posts">
          <img src="static/Logotyp_v1_ny.png" alt="Foodnest logo"/>
        </a>
      </header>

      <nav>
        <a href="/posts">Utforska</a>
        <a href="/create_recipe">Skapa recept</a>
        <a class="active" href="/profile">Min profil</a>
                   
        <!-- knapp som gör att funktionen nedan inträffar, 
        en knapp som gör att man kan ändra sitt lösenord -->
        <button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#exampleModal">Byt lösenord</button>
        
        <!--Denna delen är hämtad ifrån ett ramverk och visar en pop-up ruta
        där användaren kan skriva in sitt gamla och nya lösenord -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Byt lösenord</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>

              <div class="modal-body">
                <form class="input" name="form" action="/change_password" method="POST">
                  <div class="mb-3">
                    <label for="old" class="form-label">Ditt gamla lösenord</label>
                    <input type="password" name="old-password" class="form-control" id="old-password" aria-describedby="emailHelp"/>
                  </div>

                  <div class="mb-3">
                    <label for="new" class="form-label">Ditt nya lösenord</label>
                    <input type="password" name="new-password" class="form-control" id="new-password"/>
                  </div>

                  <button type="submit" class="btn btn-primary">Spara</button>
                </form>
              </div>

              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Stäng</button>
              </div>
            </div>
          </div>
        </div>

        <a class="log-out" href="/log_out">Logga ut</a>
      </nav>

      <main>
        <h1>Mina inlägg</h1>
        <div id="section_nav">
          <a href="/likes">Se gillade recept</a>
            <!--<h3 id="delete"> Ta bort inlägg </h3>-->
        </div>
        <div id="posts"> 
          % for r in recipes:
          <a href="/recipe/{{r['id']}}">
            <div class="text-title">{{r['title']}}</div>
            <img class="my-image" src="{{r['img']}}"/>
          </a>
          <button type="button" id="{{r['id']}}" class="btn btn-light delete">Ta bort</button>
          % end
        </div>   
      </main>

      <footer>
        <p><a href="/about">Om oss</a> © Foodnest 2021</p>
      </footer>
    </div>  <!--SLUT PÅ WRAPPER-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="/static/script.js"></script>
    <script>$(".delete").on("click", function() {
    // Frågar användaren efter vilket inlägg som ska bort
      console.log(this.id)
      window.location.replace("http://127.0.0.1:8030/remove/" + this.id)
    // tar bort det valda inlägget
      })</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
    crossorigin="anonymous">
    </script>
  </body>
</html>
